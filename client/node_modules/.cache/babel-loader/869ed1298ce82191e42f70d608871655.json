{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\full-shop\\\\client\\\\src\\\\components\\\\ProductSearch.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchField = () => {\n  _s();\n\n  const [value, setValue] = useState('');\n  const [show, setShow] = useState(false);\n  const [results, setResults] = useState([]);\n  const navigate = useNavigate();\n  const {\n    user,\n    withoutDocuments\n  } = useSelector(store => store.auth);\n  let timer = null;\n\n  const valueChanged = async value => {\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    if (value) {\n      timer = setTimeout(async () => {\n        const getProducts = await ProductController.getAll({\n          limit: 5,\n          search: value\n        });\n        setResults(getProducts.data.rows);\n      }, 500);\n      setShow(true);\n    } else {\n      setShow(false);\n    }\n\n    setValue(value);\n  };\n\n  const onProductClick = () => {\n    setValue('');\n    setShow('');\n    setResults('');\n    CloseMenu();\n  };\n\n  return /*#__PURE__*/_jsxDEV(ClickOutside, {\n    onClick: () => {\n      setShow(false);\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        CloseMenu();\n        navigate(`/search/${value}`);\n      },\n      className: c.form,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\",\n        icon: \"search\",\n        value: value,\n        onChange: e => valueChanged(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: [c.results, show && results.length ? c.show : false].join(' '),\n        children: results.length ? results.map(item => /*#__PURE__*/_jsxDEV(ResultsItem, {\n          data: calcPrice(item, user, withoutDocuments),\n          onClick: onProductClick\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 45\n        }, this)) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SearchField, \"qkVc9f4WSCn22ft5w2xwamBjFMI=\", false, function () {\n  return [useNavigate, useSelector];\n});\n\n_c = SearchField;\nexport default SearchField;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchField\");","map":{"version":3,"sources":["D:/React/full-shop/client/src/components/ProductSearch.js"],"names":["useState","useNavigate","useSelector","SearchField","value","setValue","show","setShow","results","setResults","navigate","user","withoutDocuments","store","auth","timer","valueChanged","clearTimeout","setTimeout","getProducts","ProductController","getAll","limit","search","data","rows","onProductClick","CloseMenu","e","preventDefault","c","form","target","length","join","map","item","calcPrice","id"],"mappings":"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","sourcesContent":["import { useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useSelector } from \"react-redux\"\r\n\r\nconst SearchField = () => {\r\n    const [value, setValue] = useState('')\r\n    const [show, setShow] = useState(false)\r\n    const [results, setResults] = useState([])\r\n    const navigate = useNavigate()\r\n    const { user, withoutDocuments } = useSelector(store => store.auth)\r\n\r\n    let timer = null\r\n\r\n    const valueChanged = async (value) => {\r\n        if(timer !== null) {\r\n            clearTimeout(timer)\r\n            timer = null\r\n        }\r\n\r\n        if(value) {\r\n            timer = setTimeout(async () => {\r\n                const getProducts = await ProductController.getAll({\r\n                    limit: 5,\r\n                    search: value\r\n                })\r\n\r\n                setResults(getProducts.data.rows)\r\n            }, 500)\r\n\r\n            setShow(true)\r\n        } else {\r\n            setShow(false)\r\n        }\r\n\r\n        setValue(value)\r\n    }\r\n\r\n    const onProductClick = () => {\r\n        setValue('')\r\n        setShow('')\r\n        setResults('')\r\n        CloseMenu()\r\n    }\r\n\r\n    return (\r\n        <ClickOutside onClick={() => {\r\n            setShow(false)\r\n        }}>\r\n            <form\r\n                onSubmit={(e) => {\r\n                    e.preventDefault()\r\n                    CloseMenu()\r\n                    navigate(`/search/${value}`)\r\n                }}\r\n                className={c.form}\r\n            >\r\n                <Input\r\n                    placeholder=\"Введите запрос\"\r\n                    icon=\"search\"\r\n                    value={value}\r\n                    onChange={(e) => valueChanged(e.target.value)}\r\n                />\r\n                <div className={[c.results, show && results.length ? c.show : false].join(' ')}>\r\n                    {\r\n                        results.length ?\r\n                        results.map(item => <ResultsItem key={item.id} data={calcPrice(item, user, withoutDocuments)} onClick={onProductClick}/>) : null\r\n                    }\r\n                </div>\r\n            </form>\r\n        </ClickOutside>\r\n    )\r\n}\r\n\r\nexport default SearchField"]},"metadata":{},"sourceType":"module"}